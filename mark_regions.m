function [ labels ] = mark_regions( lm,im )
%MARK_REGIONS Summary of this function goes here
%   Detailed explanation goes here
chin = csapi(lm(1,2:12),lm(2,2:12));

l_eye_top = csapi(lm(1,31:35),lm(2,31:35));
l_eye_bot = csapi(lm(1,[35:38 31]),lm(2,[35:38 31]));
l_eyeb_bot = csapi(lm(1,19:22),lm(2,19:22));
l_eyeb_top = csapi(lm(1,[22 17:19]),lm(2,[22 17:19]));
l_eyel_l = [23 41];
l_eyel_r = [23 41];

r_eye_top = csapi(lm(1,41:45),lm(2,41:45));
r_eye_bot = csapi(lm(1,[45:48 41]),lm(2,[45:48 41]));

r_eyeb_top = csapi(lm(1,23:26),lm(2,23:26));
r_eyeb_bot = csapi(lm(1,[26:28 23]),lm(2,[26:28 23]));
nose_r_top = csapi(lm(1,[23 49]),lm(2,[23 49]));
nose_l_top = csapi(lm(1,[22 51]),lm(2,[22 51]));
nose_bot = csapi(lm(1,[52 54 56:58]),lm(2,[52 54 56:58]));
nose_r_bot = csapi(lm(2,[49 55 56]),lm(1,[49 55 56]));
nose_l_bot = csapi(lm(2,[51 58 59]),lm(1,[51 58 59]));
must_l = csapi(lm(1,[59 60]),lm(2,[59 60]));
must_r = csapi(lm(1,[55 66]),lm(2,[55 66]));
beard = csapi(lm(1,[4 60:66 10]),lm(2,[4 60:66 10]));

chin_left = csapi(lm(1,[6 76]),lm(2,[6 76]));
chin_right = csapi(lm(1,[8 74]),lm(2,[8 74]));
chin_top = [74 76];
chin_bot = [6 8];
lip_top = csapi(lm(1,60:66),lm(2,60:66));
lip_bot = csapi(lm(1,[66 73:77 60]),lm(2,[66 73:77 60]));

labels = zeros(size(im,1),size(im,2));
%region 2
labels = labels + 2;

% region 7
polyx = [lm(1,1)...
    linspace(lm(1,19),lm(1,22),30)...
    linspace(lm(1,23),lm(1,26),30)...
    lm(1,13)...
    linspace(lm(1,12),lm(1,2),70)
    ];
polyy = [lm(2,1)...
    ppval(l_eyeb_top,linspace(lm(1,19),lm(1,22),30))...
    ppval(r_eyeb_top,linspace(lm(1,23),lm(1,26),30))...
    lm(2,13)...
    ppval(chin,linspace(lm(1,12),lm(1,2),70))
    ];
plot([polyx polyx(1)],[polyy polyy(1)]);
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 7;
%region 10
polyx = [linspace(lm(1,4),lm(1,10),50)...
    linspace(lm(1,10),lm(1,4),50)...
    ];
polyy = [ppval(beard,linspace(lm(1,4),lm(1,10),50))...
    ppval(chin,linspace(lm(1,10),lm(1,4),50))...
    ];
plot([polyx polyx(1)],[polyy polyy(1)]);
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 10;
% region 1
polyx = [lm(1,60):0.5:lm(1,66)...
    lm(1,55)...
    ppval(nose_r_bot,linspace(lm(2,55),lm(2,56),20))...
    linspace(lm(1,56),lm(1,58),30)...
    ppval(nose_l_bot,linspace(lm(2,58),lm(2,59),20))];
polyy = [ppval(lip_top,lm(1,60):0.5:lm(1,66))...
    lm(2,55)...
    linspace(lm(2,55),lm(2,56),20)...
    ppval(nose_bot,linspace(lm(1,56),lm(1,58),30))...
    linspace(lm(2,58),lm(2,59),20)];
plot([polyx polyx(1)],[polyy polyy(1)]);
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 1;
% region 8
polyx = [linspace(lm(1,60),lm(1,66),40)...
    linspace(lm(1,66),lm(1,60),40)
    ];
polyy = [ppval(lip_top,linspace(lm(1,60),lm(1,66),40))...
    ppval(lip_bot,linspace(lm(1,66),lm(1,60),40))...
    ];
plot([polyx polyx(1)],[polyy polyy(1)]);
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 8;
% region 9
polyx = [linspace(lm(1,76),lm(1,74),10)...
    lm(1,8)...
    linspace(lm(1,8),lm(1,6),10)...
    lm(1,76)
    ];
polyy = [ppval(lip_bot,linspace(lm(1,76),lm(1,74),10))...
    lm(2,8)...
    ppval(chin,linspace(lm(1,8),lm(1,6),10))...
    lm(2,76)
    ];
plot([polyx polyx(1)],[polyy polyy(1)]);
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 9;

%region 6
polyx = [lm(1,23) lm(1,49) ppval(nose_r_bot,linspace(lm(2,49),lm(2,56),30))...
    linspace(lm(1,56),lm(1,58),30)...
    ppval(nose_l_bot,linspace(lm(2,58),lm(2,49),30))...
    lm(1,22)
    ];
polyy = [lm(2,23) lm(2,49) linspace(lm(2,49),lm(2,56),30)...
    ppval(nose_bot,linspace(lm(1,56),lm(1,58),30))...
    linspace(lm(2,58),lm(2,49),30)...
    lm(2,22)
    ];
plot([polyx polyx(1)],[polyy polyy(1)]);
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 6;

% region 3
polyx = [linspace(lm(1,26),lm(1,23),30)...
    linspace(lm(1,23),lm(1,26),30)];
polyy = [ppval(r_eyeb_top,linspace(lm(1,26),lm(1,23),30))...
    ppval(r_eyeb_bot,linspace(lm(1,23),lm(1,26),30)) ];
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 3;
plot([polyx polyx(1)],[polyy polyy(1)]);
polyx = [linspace(lm(1,19),lm(1,22),30)...
    linspace(lm(1,22),lm(1,19),30)];
polyy = [ppval(l_eyeb_top,linspace(lm(1,19),lm(1,22),30))...
    ppval(l_eyeb_bot,linspace(lm(1,22),lm(1,19),30)) ];
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 3;
plot([polyx polyx(1)],[polyy polyy(1)]);
%region 4
polyx = [linspace(lm(1,23),lm(1,26),30)...
    linspace(lm(1,45),lm(1,41),30)...
    ];
polyy = [ppval(r_eyeb_bot,linspace(lm(1,23),lm(1,26),30))...
    ppval(r_eye_top,linspace(lm(1,45),lm(1,41),30))...
    ];
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 4;
plot([polyx polyx(1)],[polyy polyy(1)]);
polyx = [linspace(lm(1,22),lm(1,19),30)...
    linspace(lm(1,35),lm(1,31),30)...
    ];
polyy = [ppval(l_eyeb_bot,linspace(lm(1,22),lm(1,19),30))...
    ppval(l_eye_top,linspace(lm(1,35),lm(1,31),30))...
    ];
labels(poly2mask(polyx,polyy,size(labels,1),size(labels,2))) = 4;
plot([polyx polyx(1)],[polyy polyy(1)]);
end

